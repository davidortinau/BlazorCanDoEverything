<FluentBadge Fill="@(IsSelected ? "highlight" : null)"
             Appearance="@(IsSelected ? Appearance.Neutral : Appearance.Neutral)"
             Style="@GetStyle()"
             @onclick="OnChipClick">
    @Tag.Title
</FluentBadge>

@code {
    [Parameter, EditorRequired] public Tag Tag { get; set; } = default!;
    [Parameter] public bool IsSelected { get; set; }
    [Parameter] public EventCallback<Tag> OnClick { get; set; }

    private string GetStyle()
    {
        var baseStyle = "cursor: pointer; padding: 0.25rem 0.5rem;";
        if (IsSelected)
        {
            return $"--badge-fill-highlight: {Tag.Color}; --badge-color-highlight: white; {baseStyle}";
        }
        return baseStyle;
    }

    private async Task OnChipClick()
    {
        await OnClick.InvokeAsync(Tag);
    }
}
